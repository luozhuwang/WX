# WX
微信小程序，查询长沙楼盘和小学&amp;中学学位信息

# 微信小程序工具助手

这是一个包含多个实用工具的微信小程序，包括在线翻译、房屋信息查询、外汇汇率查询和双色球开奖信息等功能。

## 功能特性

### 1. 在线翻译
- 支持多种语言之间的互译
- 实时翻译功能
- **分享功能**: 支持转发给朋友和分享到朋友圈

### 2. 房屋信息查询 ⭐ 新增功能
- **城市选择**: 支持选择不同城市（长沙、北京、上海、广州、深圳、杭州、南京、武汉、成都、西安）
- **关键词搜索**: 支持输入小区名称、区域等关键词进行搜索
- **区域信息查询**: 获取指定城市的区域信息
- **房屋列表查询**: 获取指定城市的房屋列表
- **参数化请求**: 支持前端动态传递 `city_id` 和 `query` 参数
- **下拉刷新**: 支持下拉刷新数据
- **现代化UI**: 美观的用户界面设计
- **分享功能**: 支持转发给朋友和分享到朋友圈

#### 技术实现
- 使用GET请求方式调用链家API
- 支持参数化传递：
  - `city_id`: 城市ID（如：430100代表长沙）
  - `query`: 搜索关键词（如：恒大华府）
- 完整的错误处理和加载状态管理

#### API接口
```javascript
// 区域信息查询
const DISTRICT_URL = 'https://m.ke.com/mensa/cs/sug/index'
// 参数：channel=ershoufang&city_id=430100&query=恒大华府

// 房屋列表查询  
const HOUSELIST_URL = 'https://m.ke.com/liverpool/api/ershoufang/getList'
// 参数：cityId=430100&limit=20&offset=0
```

### 3. 外汇汇率查询
- 实时汇率数据
- 多货币支持
- **分享功能**: 支持转发给朋友和分享到朋友圈

### 4. 双色球开奖信息
- 最新开奖结果
- 历史开奖记录
- 奖项信息展示

### 5. 长沙市学区查询 ⭐ 新增功能
- 学校与小区对应关系查询
- 热门学校和小区推荐
- **分享功能**: 支持转发给朋友和分享到朋友圈

## 分享功能

### 转发功能说明
本小程序已完善 `wx.showShareMenu` 接口，支持以下分享功能：

1. **转发给朋友**: 用户可以将小程序页面转发给微信好友
2. **分享到朋友圈**: 用户可以将小程序分享到微信朋友圈
3. **自定义分享内容**: 每个页面都有独特的分享标题和图片

### 分享配置
- **在线翻译页面**: 分享标题为"在线翻译工具 - 支持48种语言互译"
- **房源信息页面**: 分享标题为"房源信息查询 - 实时二手房信息"
- **外汇汇率页面**: 分享标题为"外汇汇率查询 - 实时汇率换算工具"
- **学区查询页面**: 分享标题为"长沙市学区查询 - 学校小区对应关系"

### 技术实现
```javascript
// 开启分享功能
wx.showShareMenu({
  withShareTicket: true,
  menus: ['shareAppMessage', 'shareTimeline']
})

// 转发给朋友
onShareAppMessage() {
  return {
    title: '页面标题',
    path: '/pages/index/index',
    imageUrl: '/images/icon.jpg'
  }
}

// 分享到朋友圈
onShareTimeline() {
  return {
    title: '页面标题',
    imageUrl: '/images/icon.jpg'
  }
}
```

## 项目结构

```
WX/
├── app.js                 # 小程序入口文件
├── app.json              # 小程序配置文件
├── app.wxss              # 全局样式文件
├── pages/
│   ├── index/            # 在线翻译页面
│   ├── houseinfo/        # 房屋信息查询页面 ⭐
│   ├── degree2build/     # 长沙市学区查询页面 ⭐
│   ├── exchange/         # 外汇汇率查询页面
│   └── webview/          # WebView页面
├── utils/               # 工具函数
│   ├── share.js         # 分享工具类 ⭐
│   ├── signature.js     # 签名工具
│   └── util.js          # 通用工具
└── images/              # 图片资源
```

## 使用说明

### 房屋信息查询功能

1. **选择城市**: 点击城市选择器，选择要查询的城市
2. **输入关键词**: 在搜索框中输入小区名称或区域关键词
3. **执行搜索**: 点击搜索按钮或按回车键
4. **查看结果**: 查看区域信息或房屋列表
5. **切换模式**: 使用切换按钮在"区域信息"和"房屋列表"之间切换
6. **刷新数据**: 下拉页面可以刷新当前数据

### 分享功能使用

1. **转发给朋友**: 点击右上角菜单，选择"转发"即可分享给微信好友
2. **分享到朋友圈**: 点击右上角菜单，选择"分享到朋友圈"
3. **自定义分享**: 每个页面都会显示相应的分享标题和图片

### 参数说明

- **city_id**: 城市ID，支持的城市包括：
  - 长沙: 430100
  - 北京: 110000
  - 上海: 310000
  - 广州: 440100
  - 深圳: 440300
  - 杭州: 330100
  - 南京: 320100
  - 武汉: 420100
  - 成都: 510100
  - 西安: 610100

- **query**: 搜索关键词，可以是：
  - 小区名称（如：恒大华府）
  - 区域名称（如：岳麓区）
  - 街道名称（如：麓谷街道）

## 开发说明

### 环境要求
- 微信开发者工具
- 微信小程序基础库 2.0+

### 安装和运行
1. 克隆项目到本地
2. 使用微信开发者工具打开项目
3. 在模拟器中预览或真机调试

### 自定义配置
可以在 `pages/houseinfo/houseinfo.js` 中修改：
- 默认城市ID
- 支持的城市列表
- API请求参数
- 页面显示逻辑

### 分享功能配置
可以在 `utils/share.js` 中修改：
- 分享标题和图片
- 分享路径配置
- 成功/失败回调处理

## 注意事项

1. 本应用使用了第三方API，请确保网络连接正常
2. 部分功能可能需要网络权限
3. API调用频率请遵循相关服务商的使用规范
4. 建议在真机上测试网络请求功能
5. 分享功能需要在真机上测试，模拟器可能无法正常显示分享菜单

## 更新日志

### v1.2.0 (最新)
- ✅ 完善转发功能，支持 `wx.showShareMenu` 接口
- ✅ 为所有主要页面添加分享功能
- ✅ 创建统一的分享工具类 `utils/share.js`
- ✅ 支持转发给朋友和分享到朋友圈
- ✅ 自定义每个页面的分享标题和图片

### v1.1.0
- ✅ 新增房屋信息查询功能
- ✅ 支持城市选择和关键词搜索
- ✅ 实现参数化GET请求
- ✅ 添加现代化UI设计
- ✅ 支持下拉刷新功能

### v1.0.0
- ✅ 基础功能实现
- ✅ 在线翻译功能
- ✅ 外汇汇率查询
- ✅ 双色球开奖信息 
